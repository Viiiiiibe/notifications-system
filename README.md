# notifications-system
### Система уведомлений о действиях в Django

Имеется таблица (items) где есть поля ID, Name, Status, Updated at и поле привязки к юзеру - Owner.
1) Таблица выводится в админ-панели Django
2) Пользователь без прав суперюзера видит только те записи из items которые принадлежит ему. Суперюзер видит все записи.
3) Записи фильтруются по юзеру и статусу.
4) При изменении его записи суперюзером, пользователю приходит уведомление в админ панели. Суперюзеры также получают уведомления при изменении любых записей любым пользователем. Уведомление пропадает автоматически через несколько секунд.
5) При смене привязки записи items к другому пользователю, уведомления приходят предыдущему владельцу о смене принадлежности и новому владельцу.
6) В админ панель items добавлены текстовые фильтры по полям username (владельца) и name у items. Фильтры сделаны двумя разными input полями.

Уведомления сделаны через websocket, используется InMemoryChannelLayer, запускается на daphne-сервере, БД - SQLite, для упрощенной передачи статических файлов используем WhiteNoiseMiddleware.

## Локальный запуск проекта
- Через консоль перейти в папку проекта (notifications-system), установить и активировать виртуальное окружение:
```console  
python -m venv venv
```
или
```console  
python3 -m venv venv
```
активация Windows:
```console  
.\venv\Scripts\activate.bat
```
активация macOS и Linux:
```console  
source venv/bin/activate
```
- Установить в виртуальное окружение используемые библиотеки:
```console  
pip install -r requirements.txt
``` 
- Репозиторий уже содержит статические файлы, но при необходимости через консоль перейти в папку notifications-system/proj (папка с файлом manage.py) и собрать статические файлы (необязательно):
```console  
python manage.py collectstatic --no-input
```
или
```console  
python3 manage.py collectstatic --no-input
```
- Репозиторий уже содержит SQLite с демонстрационными данными, но при необходимости через консоль в папке notifications-system/proj (папка с файлом manage.py) применить миграции для новой БД и вызвать команду для создания тестовых данных (необязательно):
```console  
python manage.py migrate 
```
или
```console  
python3 manage.py migrate 
```
создание тестовых данных (необязательно):
```console  
python manage.py create_test_data
```
или
```console  
python3 manage.py create_test_data
```
- В папке с файлом manage.py выполнить команду для запуска локального сервера:
```console  
daphne -b 127.0.0.1 -p 8000 proj.asgi:application 
```

Таблица items будет доступна в админке по адресу http://127.0.0.1:8000/admin/items/item/

Пользователи в тестовом наборе данных:

| Логин | Пароль   | Права               |
|-------|----------|---------------------|
| admin | password | суперюзер           |
| alice | password | без прав суперюзера |
| bob   | password | без прав суперюзера |
